<div>
  @if(isLoggedIn()){
    <p-toolbar>
      <div>
        <p-button (onClick)="op.toggle($event); loadShelves()" label="Add to shelve" icon="pi pi-add" />
        <p-overlayPanel #op>
          <div class="flex flex-column gap-3 w-25rem">
            <div>
              <span class="font-medium text-900 block mb-2">Select shelf</span>
              <p-listbox
                [options]="shelves()"
                [(ngModel)]="selectedShelf"
                optionLabel="name"
                [style]="{'width':'15rem'}"
                [listStyle]="{'max-height': '220px'}" />
              <p-button (click)="op.toggle($event); addBookToShelf()" label="Add to shelf"></p-button>
            </div>
          </div>
        </p-overlayPanel>
      </div>
      @if(book()?.addedBy === userService.getUser()?.id){
        <!--   Show only if user added book   -->
        <div class="p-toolbar-group-start">
          <p-button routerLink="edit" [state]="{book: book()}" icon="pi pi-pencil" class="mr-2"/>
          <p-button (click)="deleteBook()" icon="pi pi-trash" class="mr-2"/>
        </div>
      }
    </p-toolbar>
  }
  <div class="flex-container">
    <div>
      <app-book-item [book]="book()"></app-book-item>
      <app-recommendations></app-recommendations>
    </div>
    <app-comments [bookId]="route.snapshot.paramMap.get('id')!"></app-comments >
  </div>
</div>
